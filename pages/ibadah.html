<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Sholat - Sync Planner</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/features.css">
</head>
<body>
  <header class="header" id="appHeader"></header>
  <main class="main" id="mainContent"></main>
  <nav class="bottom-nav" id="bottomNav"></nav>

  <script src="../js/data.js"></script>
  <script src="../js/app.js"></script>
  <script>
    function render() {
      const main = document.getElementById('mainContent');
      const sholat = loadSholat();
      const sholatDone = Object.values(sholat).filter(s => s?.done).length;
      
      main.innerHTML = `
        <div class="card mb-3" style="background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border:none;">
          <div style="text-align:center;">
            <div style="font-size:32px;font-weight:700;color:#2e7d32;">${sholatDone}/8</div>
            <div style="font-size:13px;color:#558b2f;">Sholat hari ini</div>
            <div style="margin-top:8px;height:8px;background:rgba(0,0,0,0.1);border-radius:4px;overflow:hidden;">
              <div style="height:100%;width:${(sholatDone/8)*100}%;background:#2e7d32;border-radius:4px;transition:width 0.3s;"></div>
            </div>
          </div>
        </div>
        
        <h3 style="font-size:14px;color:#666;margin-bottom:12px;">ðŸ•Œ Sholat Fardhu</h3>
        <div class="sholat-container mb-3">
          ${SHOLAT_LIST.filter(s => s.fardhu).map(s => `
            <div class="sholat-item ${sholat[s.id]?.done?'done':''}" onclick="toggleSholatItem('${s.id}')">
              <div class="icon">${s.icon}</div>
              <div class="name">${s.name}</div>
              <div class="time">${s.time}</div>
              ${sholat[s.id]?.done ? '<div style="color:#2e7d32;font-size:20px;margin-top:4px;">âœ“</div>' : ''}
            </div>
          `).join('')}
        </div>
        
        <h3 style="font-size:14px;color:#666;margin-bottom:12px;">âœ¨ Sholat Sunnah</h3>
        <div class="sholat-container mb-3">
          ${SHOLAT_LIST.filter(s => !s.fardhu).map(s => `
            <div class="sholat-item ${sholat[s.id]?.done?'done':''}" onclick="toggleSholatItem('${s.id}')">
              <div class="icon">${s.icon}</div>
              <div class="name">${s.name}</div>
              <div class="time">${s.time}</div>
              ${sholat[s.id]?.done ? '<div style="color:#2e7d32;font-size:20px;margin-top:4px;">âœ“</div>' : ''}
            </div>
          `).join('')}
        </div>
        
        <div class="card" style="background:#e3f2fd;border:none;">
          <div style="display:flex;align-items:center;justify-content:space-between;">
            <div>
              <h4 style="font-size:14px;margin:0;">ðŸ“¿ Dzikir Pagi/Sore</h4>
              <p style="font-size:12px;color:#666;margin:4px 0 0 0;">13 dzikir dengan keutamaan</p>
            </div>
            <button class="btn btn-primary btn-sm" onclick="navigateTo('dzikir')">Buka â†’</button>
          </div>
        </div>
      `;
    }
    
    function toggleSholatItem(id) {
      const sholat = loadSholat();
      if (!sholat[id]) sholat[id] = {};
      sholat[id].done = !sholat[id].done;
      Storage.saveToday('sholat', sholat);
      render();
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      // Cek URL parameter untuk tab
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('tab') === 'dzikir') {
        activeTab = 'dzikir';
      }
      
      renderHeader({ simple: true, title: activeTab === 'dzikir' ? 'ðŸ“¿ Dzikir Pagi/Sore' : 'ðŸ•Œ Tracker Sholat' });
      renderBottomNav();
      render();
    });
  </script>
</body>
</html>
