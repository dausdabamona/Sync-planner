<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Piramida Visi - Sync Planner</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/features.css">
</head>
<body>
  <header class="header" id="appHeader"></header>
  <main class="main" id="mainContent"></main>
  <nav class="bottom-nav" id="bottomNav"></nav>

  <script src="../js/data.js"></script>
  <script src="../js/app.js"></script>
  <script>
    function render() {
      const main = document.getElementById('mainContent');
      const vision = loadVision();
      
      main.innerHTML = `
        <div class="card mb-3" style="background:linear-gradient(135deg,#e8eaf6,#c5cae9);border:none;text-align:center;">
          <div style="font-size:32px;margin-bottom:8px;">ğŸ”­</div>
          <h3 style="font-size:16px;margin-bottom:4px;">Piramida Visi</h3>
          <p style="font-size:12px;color:#666;margin:0;">Visi jangka panjang membimbing langkahmu hari ini</p>
        </div>
        
        <!-- 10 Year Vision -->
        <div class="card" style="border-left:4px solid #6a1b9a;margin-bottom:16px;">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;">
            <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#6a1b9a,#9c27b0);display:flex;align-items:center;justify-content:center;color:white;font-size:14px;font-weight:700;">10Y</div>
            <div>
              <h4 style="font-size:14px;margin:0;">Visi 10 Tahun</h4>
              <p style="font-size:11px;color:#666;margin:0;">Legacy yang ingin ditinggalkan</p>
            </div>
          </div>
          ${vision.year10 ? `
            <p style="font-size:13px;color:#333;margin-bottom:12px;">${vision.year10}</p>
            <button class="btn btn-sm btn-secondary" onclick="editVision('year10')">âœï¸ Edit</button>
          ` : `
            <button class="btn btn-primary btn-full" onclick="editVision('year10')">+ Tulis Visi 10 Tahun</button>
          `}
        </div>
        
        <!-- 3 Year Vision -->
        <div class="card" style="border-left:4px solid #2E7D32;margin-bottom:16px;">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;">
            <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#2E7D32,#4CAF50);display:flex;align-items:center;justify-content:center;color:white;font-size:14px;font-weight:700;">3Y</div>
            <div>
              <h4 style="font-size:14px;margin:0;">Visi 3 Tahun</h4>
              <p style="font-size:11px;color:#666;margin:0;">Milestone menuju visi besar</p>
            </div>
          </div>
          ${vision.year3 ? `
            <p style="font-size:13px;color:#333;margin-bottom:12px;">${vision.year3}</p>
            <button class="btn btn-sm btn-secondary" onclick="editVision('year3')">âœï¸ Edit</button>
          ` : `
            <button class="btn btn-primary btn-full" onclick="editVision('year3')">+ Tulis Visi 3 Tahun</button>
          `}
        </div>
        
        <!-- 1 Year Vision -->
        <div class="card" style="border-left:4px solid #00695c;margin-bottom:16px;">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;">
            <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#00695c,#009688);display:flex;align-items:center;justify-content:center;color:white;font-size:14px;font-weight:700;">1Y</div>
            <div>
              <h4 style="font-size:14px;margin:0;">Visi 1 Tahun</h4>
              <p style="font-size:11px;color:#666;margin:0;">Target tahun ini</p>
            </div>
          </div>
          ${vision.year1 ? `
            <p style="font-size:13px;color:#333;margin-bottom:12px;">${vision.year1}</p>
            <button class="btn btn-sm btn-secondary" onclick="editVision('year1')">âœï¸ Edit</button>
          ` : `
            <button class="btn btn-primary btn-full" onclick="editVision('year1')">+ Tulis Visi 1 Tahun</button>
          `}
        </div>
        
        <!-- Tips -->
        <div class="card" style="background:#fffde7;border:none;">
          <h4 style="font-size:13px;margin-bottom:8px;">ğŸ’¡ Tips Menulis Visi</h4>
          <ul style="font-size:12px;color:#666;padding-left:16px;margin:0;">
            <li>Tulislah seolah sudah terjadi</li>
            <li>Sertakan emosi dan detail</li>
            <li>Bayangkan semua aspek kehidupan</li>
            <li>Review dan update secara berkala</li>
          </ul>
        </div>
      `;
    }
    
    function editVision(type) {
      const vision = loadVision();
      const labels = { year10: 'Visi 10 Tahun', year3: 'Visi 3 Tahun', year1: 'Visi 1 Tahun' };
      const prompts = {
        year10: 'Di umur berapa kamu dalam 10 tahun? Bagaimana kehidupanmu? Apa legacy yang ingin ditinggalkan?',
        year3: 'Dalam 3 tahun, pencapaian apa yang sudah kamu raih? Bagaimana keluarga, karir, spiritual?',
        year1: 'Tahun ini, target konkret apa yang harus tercapai untuk mendekatkanmu ke visi 3 tahun?'
      };
      
      openModal(`
        <div class="modal">
          <div class="modal-header">
            <h3 class="modal-title">âœï¸ ${labels[type]}</h3>
            <button class="modal-close" onclick="closeModal()">âœ•</button>
          </div>
          <div class="modal-body">
            <p style="font-size:12px;color:#666;margin-bottom:12px;">${prompts[type]}</p>
            <div class="form-group">
              <textarea class="form-input form-textarea" id="visionText" rows="6" placeholder="Tuliskan visimu...">${vision[type] || ''}</textarea>
            </div>
            <button class="btn-submit" onclick="saveVision('${type}')">Simpan</button>
          </div>
        </div>
      `);
    }
    
    function saveVision(type) {
      const text = document.getElementById('visionText')?.value.trim();
      const vision = loadVision();
      vision[type] = text;
      Storage.save('vision', vision);
      closeModal();
      showToast('âœ“ Visi tersimpan', 'success');
      render();
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      renderHeader({ simple: true, title: 'ğŸ”­ Piramida Visi' });
      renderBottomNav();
      render();
    });
  </script>
</body>
</html>
