<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0D47A1">
  <title>Sync Planner - Islamic Productivity</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/features.css">
</head>
<body>
  <header class="header" id="appHeader"></header>
  <main class="main" id="mainContent"><div class="loading"><div class="spinner"></div></div></main>
  <nav class="bottom-nav" id="bottomNav"></nav>

  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
  <script>
    // ===== HOME PAGE RENDER =====
    function renderHome() {
      const main = document.getElementById('mainContent');
      const quote = getRandomQuote();
      const journal = loadJournal();
      const tasks = loadTasks().filter(t => !t.done).slice(0, 3);
      const sholat = loadSholat();
      const habits = loadHabits();
      const schedule = isWeekend() ? BEST_WEEK_TEMPLATE.weekend : BEST_WEEK_TEMPLATE.weekdays;
      
      main.innerHTML = `
        <!-- Quote Card -->
        <div class="quote-card">
          <div class="quote-icon">ğŸ’¡</div>
          <div class="quote-content">
            <div class="quote-text">${quote.text}</div>
            <div class="quote-source">â€” ${quote.source}</div>
          </div>
          <button class="quote-refresh" onclick="refreshQuote()">ğŸ”„</button>
        </div>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
          <button class="action-btn primary" onclick="navigateTo('pomodoro')"><span class="icon">ğŸ¯</span><span class="label">Fokus</span></button>
          <button class="action-btn" onclick="goToDzikir()"><span class="icon">ğŸ“¿</span><span class="label">Dzikir</span></button>
          <button class="action-btn" onclick="navigateTo('journal')"><span class="icon">ğŸ“</span><span class="label">Jurnal</span></button>
          <button class="action-btn" onclick="navigateTo('wisdom')"><span class="icon">ğŸ›ï¸</span><span class="label">Wisdom</span></button>
        </div>
        
        <!-- Two Column -->
        <div class="home-two-column">
          <div class="home-left-col">
            <div class="journal-card morning compact-card">
              <div class="header"><div class="title">â˜€ï¸ Jurnal Pagi</div><span class="status ${journal.morning?'done':'pending'}">${journal.morning?'âœ“':'Belum'}</span></div>
              ${!journal.morning ? '<button class="btn btn-sm btn-primary btn-full" onclick="navigateTo(\'journal\')">Isi Jurnal</button>' : '<div class="content">'+(journal.morning.focus||'Sudah diisi')+'</div>'}
            </div>
            <div class="journal-card evening compact-card">
              <div class="header"><div class="title">ğŸŒ™ Jurnal Malam</div><span class="status ${journal.evening?'done':'pending'}">${journal.evening?'âœ“':'Belum'}</span></div>
              ${!journal.evening ? '<button class="btn btn-sm btn-primary btn-full" onclick="navigateTo(\'journal\')">Isi Jurnal</button>' : '<div class="content">'+(journal.evening.wins||'Sudah diisi')+'</div>'}
            </div>
          </div>
          <div class="home-right-col">
            <div class="card compact-card wisdom-home-card" onclick="navigateTo('wisdom')">
              <div class="wisdom-of-day">
                <div class="wisdom-home-icon">ğŸ›ï¸</div>
                <div class="wisdom-home-principle">Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±Ø¬</div>
                <div class="wisdom-home-title">Kesabaran adalah Kunci</div>
                <div class="wisdom-home-frameworks"><span>ğŸ›ï¸</span><span>ğŸ§ </span><span>ğŸ¦‹</span><span>âš›ï¸</span></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Sholat & Dzikir Row -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
          <!-- Sholat Mini -->
          <div class="card compact-card" style="margin-bottom:0;" onclick="navigateTo('ibadah')">
            <div class="card-header"><span class="card-title">ğŸ•Œ Sholat</span></div>
            <div style="text-align:center;padding:8px 0;">
              <div style="font-size:28px;font-weight:700;color:#2e7d32;">${Object.values(sholat).filter(s => s?.done).length}/8</div>
              <div style="font-size:11px;color:#666;">Tap untuk ceklis</div>
            </div>
          </div>
          
          <!-- Dzikir Mini -->
          <div class="card compact-card" style="margin-bottom:0;" onclick="goToDzikir()">
            <div class="card-header"><span class="card-title">ğŸ“¿ Dzikir</span></div>
            <div style="text-align:center;padding:8px 0;">
              <div style="font-size:28px;font-weight:700;color:#2E7D32;">${DZIKIR_LIST.filter(d => (loadDzikir()[d.id] || 0) >= d.count).length}/13</div>
              <div style="font-size:11px;color:#666;">Tap untuk hitung</div>
            </div>
          </div>
        </div>
        
        <!-- Sholat Detail -->
        <div class="card compact-card">
          <div class="card-header"><span class="card-title">ğŸ•Œ Sholat Hari Ini</span><span class="card-action" onclick="navigateTo('ibadah')">Detail â†’</span></div>
          <div class="sholat-mini-list">
            ${SHOLAT_LIST.map(s => `<div class="sholat-row-item ${sholat[s.id]?.done?'done':''}" onclick="toggleSholat('${s.id}')"><div class="check">${sholat[s.id]?.done?'âœ“':''}</div><span>${s.icon} ${s.name}</span></div>`).join('')}
          </div>
        </div>
        
        <!-- Tasks -->
        <div class="card compact-card">
          <div class="card-header"><span class="card-title">ğŸ“Œ Fokus Hari Ini</span><span class="card-action" onclick="navigateTo('tasks')">Semua â†’</span></div>
          ${tasks.length ? tasks.map(t => `
            <div class="task-item priority-${t.priority||'medium'}" onclick="toggleTask('${t.id}')">
              <div class="task-checkbox ${t.done?'checked':''}">${t.done?'âœ“':''}</div>
              <div class="task-content"><div class="task-title">${t.title}</div></div>
            </div>
          `).join('') : '<div class="empty-state"><p>Belum ada task</p></div>'}
        </div>
        
        <!-- Schedule -->
        <div class="card compact-card">
          <div class="card-header"><span class="card-title">ğŸ“… Jadwal Hari Ini</span></div>
          <div class="today-schedule-container">
            ${schedule.slice(0, 8).map(item => `<div class="today-schedule-item"><span class="schedule-time">${item.time}</span><span class="schedule-activity">${item.activity}</span></div>`).join('')}
          </div>
        </div>
      `;
    }
    
    function refreshQuote() {
      const quote = getRandomQuote();
      document.querySelector('.quote-text').textContent = quote.text;
      document.querySelector('.quote-source').textContent = 'â€” ' + quote.source;
    }
    
    function goToDzikir() {
      window.location.href = 'pages/ibadah.html?tab=dzikir';
    }
    
    // Init
    document.addEventListener('DOMContentLoaded', () => {
      renderHeader();
      renderBottomNav('home');
      renderHome();
    });
  </script>
</body>
</html>
