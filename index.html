<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0D47A1">
  <meta name="description" content="Sync Planner - Produktivitas Islami untuk ASN">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Sync Planner v4.2 - Produktivitas Islami</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/dzikir-fullscreen.css">
</head>
<body>
  <!-- Offline Indicator -->
  <div id="offlineIndicator" class="offline-indicator">
    ğŸ“¡ Anda sedang offline
  </div>

  <!-- ============================================ -->
  <!-- LOGIN PAGE -->
  <!-- ============================================ -->
  <div id="loginPage" class="login-page">
    <div class="login-card">
      <div class="login-logo">ğŸ•Œ</div>
      <h1 class="login-title">Sync Planner</h1>
      <p class="login-subtitle">Produktivitas Islami untuk ASN</p>
      
      <!-- Google Sign-In Button -->
      <div id="googleSignInButton"></div>
      
      <div class="login-divider">
        <span>atau</span>
      </div>
      
      <!-- Demo Login -->
      <button class="btn btn-secondary w-full" onclick="demoLogin()">
        ğŸ§ª Coba Mode Demo
      </button>
      
      <div class="mt-md">
        <p class="text-small text-muted text-center">
          Mode demo untuk mencoba fitur tanpa login.<br>
          Data tersimpan di browser Anda.
        </p>
      </div>
      
      <!-- API Configuration (collapsed) -->
      <details class="mt-md">
        <summary class="text-small text-muted" style="cursor: pointer;">
          âš™ï¸ Konfigurasi API (opsional)
        </summary>
        <div class="form-group mt-md">
          <label class="form-label">Google Apps Script URL</label>
          <input type="url" id="apiUrlInput" class="form-input" 
                 placeholder="https://script.google.com/macros/s/...">
          <p class="text-small text-muted mt-md">
            Masukkan URL deployment Google Apps Script Anda untuk menyimpan data di cloud.
          </p>
        </div>
      </details>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- MAIN APP (hidden until logged in) -->
  <!-- ============================================ -->
  <div id="mainApp" class="hidden">
    <!-- Header -->
    <header class="header">
      <div class="header-top">
        <h1>ğŸ•Œ Sync Planner</h1>
        <span class="header-date" id="currentDate">Loading...</span>
      </div>
      
      <div class="header-greeting">
        <div class="arabic" id="greetingArabic">Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’</div>
        <div class="translation" id="greetingText">Assalamu'alaikum</div>
      </div>
      
      <div class="header-stats">
        <div class="stats-left">
          <div class="stat-item clickable" onclick="showPage('ibadah')">
            <span>ğŸ•Œ</span>
            <span class="value" id="sholatProgress">0/5</span>
          </div>
          <div class="stat-item clickable" onclick="showPage('dzikir')">
            <span>ğŸ“¿</span>
            <span class="value" id="dzikirProgress">0%</span>
          </div>
        </div>
        <div class="quick-icons">
          <button class="quick-icon-btn" onclick="SyncDzikir.startSession()" title="Mulai Dzikir">
            â–¶ï¸
          </button>
        </div>
      </div>
    </header>

    <!-- Pages Container -->
    <main>
      <!-- HOME PAGE -->
      <div id="page-home" class="page active">
        <div class="card">
          <div class="card-header">
            <span class="card-title">ğŸ’¡ Quote Hari Ini</span>
          </div>
          <div id="dailyQuote" class="text-muted">
            <em>Memuat quote...</em>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <span class="card-title">ğŸ“‹ Tugas Hari Ini</span>
            <button class="btn btn-icon" onclick="openModal('task')">+</button>
          </div>
          <div id="todayTasks">
            <div class="empty-state">
              <span class="icon">âœ…</span>
              <p>Tidak ada tugas hari ini</p>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <span class="card-title">ğŸ… Pomodoro Hari Ini</span>
          </div>
          <div id="pomodoroStats">
            <p class="text-center text-muted">0 sesi â€¢ 0 menit fokus</p>
          </div>
          <button class="btn btn-primary w-full mt-md" onclick="showPage('pomodoro')">
            ğŸ… Mulai Fokus
          </button>
        </div>
      </div>

      <!-- DZIKIR PAGE -->
      <div id="page-dzikir" class="page">
        <div class="dzikir-time-tabs">
          <button class="dzikir-time-tab active" data-time="pagi" onclick="SyncDzikir.setTime('pagi')">
            ğŸŒ… Pagi
          </button>
          <button class="dzikir-time-tab" data-time="sore" onclick="SyncDzikir.setTime('sore')">
            ğŸŒ† Sore
          </button>
        </div>
        
        <div id="dzikirSummary" class="dzikir-summary">
          <!-- Rendered by JS -->
        </div>
        
        <button class="btn btn-spiritual w-full mb-md" onclick="SyncDzikir.startSession()">
          â–¶ï¸ Mulai Dari Awal
        </button>
        
        <div id="dzikirList">
          <!-- Rendered by JS -->
        </div>
        
        <button class="btn btn-secondary w-full mt-md" onclick="SyncDzikir.resetToday()">
          ğŸ”„ Reset Hari Ini
        </button>
      </div>

      <!-- KANBAN PAGE -->
      <div id="page-kanban" class="page">
        <div class="card-header">
          <span class="card-title">ğŸ“‹ Kanban Board</span>
          <button class="btn btn-primary" onclick="openModal('task')">+ Task</button>
        </div>
        <div id="kanbanBoard">
          <!-- Rendered by JS -->
        </div>
      </div>

      <!-- POMODORO PAGE -->
      <div id="page-pomodoro" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">ğŸ… Pomodoro Timer</span>
          </div>
          <div id="pomodoroTimer" class="text-center p-md">
            <div class="pomodoro-display">
              <span id="pomodoroTime" style="font-size: 48px; font-weight: 700;">25:00</span>
            </div>
            <div class="flex justify-center gap-sm mt-md">
              <button class="btn btn-secondary" onclick="setPomodoro(25)">25m</button>
              <button class="btn btn-secondary" onclick="setPomodoro(60)">60m</button>
              <button class="btn btn-secondary" onclick="setPomodoro(90)">90m</button>
            </div>
            <button class="btn btn-primary w-full mt-md" id="pomodoroStartBtn" onclick="togglePomodoro()">
              â–¶ï¸ Mulai
            </button>
          </div>
        </div>
      </div>

      <!-- SETTINGS PAGE -->
      <div id="page-settings" class="page">
        <div id="userProfile" class="user-profile">
          <div class="user-avatar" id="userAvatar">ğŸ‘¤</div>
          <div class="user-info">
            <div class="user-name" id="userName">Guest</div>
            <div class="user-email" id="userEmail">-</div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">Akun</div>
          <div class="settings-item">
            <span class="settings-item-label">Status Login</span>
            <span class="settings-item-value" id="loginStatus">Demo Mode</span>
          </div>
          <div class="settings-item">
            <span class="settings-item-label">Logout</span>
            <span class="settings-item-action" onclick="logout()">Keluar</span>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">Sinkronisasi</div>
          <div class="settings-item">
            <span class="settings-item-label">API Status</span>
            <span class="settings-item-value" id="apiStatus">Tidak terhubung</span>
          </div>
          <div class="settings-item">
            <span class="settings-item-label">Pending Sync</span>
            <span class="settings-item-value" id="settingPendingCount">0</span>
          </div>
          <div class="settings-item">
            <span class="settings-item-label">Sync Sekarang</span>
            <span class="settings-item-action" onclick="manualSync()">Sync</span>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">Tentang</div>
          <div class="settings-item">
            <span class="settings-item-label">Versi</span>
            <span class="settings-item-value">4.2</span>
          </div>
        </div>
      </div>

      <!-- OTHER PAGES (placeholders) -->
      <div id="page-ibadah" class="page">
        <h2>ğŸ•Œ Tracker Ibadah</h2>
        <p class="text-muted">Coming soon...</p>
      </div>
      
      <div id="page-goals" class="page">
        <h2>ğŸ¯ Goals</h2>
        <p class="text-muted">Coming soon...</p>
      </div>
      
      <div id="page-menu" class="page">
        <h2>ğŸ“± Menu</h2>
        <div class="card">
          <div class="settings-item" onclick="showPage('dzikir')">
            <span>ğŸ“¿ Dzikir Pagi & Sore</span>
            <span>â†’</span>
          </div>
          <div class="settings-item" onclick="showPage('ibadah')">
            <span>ğŸ•Œ Tracker Sholat</span>
            <span>â†’</span>
          </div>
          <div class="settings-item" onclick="showPage('goals')">
            <span>ğŸ¯ Goals</span>
            <span>â†’</span>
          </div>
          <div class="settings-item" onclick="showPage('settings')">
            <span>âš™ï¸ Pengaturan</span>
            <span>â†’</span>
          </div>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="nav-bottom">
      <div class="nav-item active" onclick="showPage('home', this)">
        <span class="icon">ğŸ </span>
        <span>Home</span>
      </div>
      <div class="nav-item" onclick="showPage('dzikir', this)">
        <span class="icon">ğŸ“¿</span>
        <span>Dzikir</span>
      </div>
      <div class="nav-item" onclick="showPage('kanban', this)">
        <span class="icon">ğŸ“‹</span>
        <span>Kanban</span>
      </div>
      <div class="nav-item" onclick="showPage('pomodoro', this)">
        <span class="icon">ğŸ…</span>
        <span>Fokus</span>
      </div>
      <div class="nav-item" onclick="showPage('menu', this)">
        <span class="icon">â˜°</span>
        <span>Menu</span>
      </div>
    </nav>

    <!-- Sync Button -->
    <button id="syncButton" class="sync-button" onclick="manualSync()">
      ğŸ”„
      <span class="count" id="syncBtnCount">0</span>
    </button>
  </div>

  <!-- ============================================ -->
  <!-- DZIKIR FULLSCREEN -->
  <!-- ============================================ -->
  <div id="dzikirFullscreen">
    <div class="dzikir-fs-header">
      <button onclick="closeDzikirFullscreen()">âœ•</button>
      <span id="dzikirFsTitle">Dzikir</span>
      <div class="dzikir-fs-nav">
        <button id="dzikirPrevBtn" onclick="goToPrevDzikir()">â—€</button>
        <span id="dzikirNavIndicator">1/17</span>
        <button id="dzikirNextBtn" onclick="goToNextDzikir()">â–¶</button>
      </div>
    </div>
    
    <div class="dzikir-fs-content">
      <div id="dzikirFsArabic" class="dzikir-fs-arabic">
        Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù
      </div>
      <div id="dzikirFsLatin" class="dzikir-fs-latin">
        Bismillah
      </div>
      <div id="dzikirFsMeaning" class="dzikir-fs-meaning">
        Dengan nama Allah
      </div>
      
      <div id="dzikirFsCircle" class="dzikir-fs-circle" onclick="incrementDzikirFs()">
        <span id="dzikirFsCount" class="dzikir-fs-count">0</span>
        <span id="dzikirFsTarget" class="dzikir-fs-target">/ 100</span>
      </div>
      
      <div class="dzikir-fs-progress">
        <div id="dzikirFsProgressBar" class="dzikir-fs-progress-bar" style="width: 0%"></div>
      </div>
      
      <div id="dzikirFsVirtue" class="dzikir-fs-virtue">
        <span id="dzikirFsVirtueText">Keutamaan dzikir ini...</span>
      </div>
      
      <div class="dzikir-fs-actions">
        <button onclick="decrementDzikirFs()">âˆ’</button>
        <button onclick="resetDzikirFs()">â†º</button>
      </div>
      
      <button id="dzikirFsCompleteBtn" class="dzikir-fs-complete" onclick="completeDzikirFs()">
        âœ“ Selesai & Simpan
      </button>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- MODALS -->
  <!-- ============================================ -->
  <div id="modal-task" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Tambah Task</h3>
        <button onclick="closeModal('task')">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Judul Task</label>
          <input type="text" id="taskTitle" class="form-input" placeholder="Apa yang perlu dikerjakan?">
        </div>
        <div class="form-group">
          <label class="form-label">Deskripsi (opsional)</label>
          <textarea id="taskDescription" class="form-textarea" placeholder="Detail tambahan..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Due Date</label>
          <input type="date" id="taskDueDate" class="form-input">
        </div>
        <div class="form-group">
          <label class="form-label">Prioritas</label>
          <select id="taskPriority" class="form-select">
            <option value="low">Low</option>
            <option value="normal" selected>Normal</option>
            <option value="high">High</option>
            <option value="urgent">Urgent</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('task')">Batal</button>
        <button class="btn btn-primary" onclick="saveTask()">Simpan</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- ============================================ -->
  <!-- SCRIPTS -->
  <!-- ============================================ -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/api.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/dzikir.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
